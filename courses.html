<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Course Catalog - Ukno Club</title> <link rel="stylesheet" href="courses.css"> <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"> </head>
<body>
  <div class="course-container">
    <header class="course-header">
        <div class="branding">
            <img src="assets/logo.png" alt="Ukno Club" class="logo">
            <h1 id="pageTitle">Course Catalog</h1> </div>
        <nav class="header-nav"> <a href="dashboard.html">Dashboard</a>
            <a href="courses.html">Catalog</a> <a href="notes.html">My Notes</a>
            <a href="feedback.html">Feedback</a>
        </nav>
    </header>

    <main class="course-main">
        <div id="courseIndexContent"> <section class="course-module">
                <h2>ðŸŸ¦ MODULE 1: Data Analyst Track</h2>
                <p class="module-goal">Goal: Learn tools to analyze and visualize data using spreadsheets, SQL, and BI tools.</p>
                <div class="topic-list-grid"> <a href="courses.html?video=stats-fundamentals" class="topic-card">
                         <h4>Statistics Fundamentals</h4>
                         <p>Descriptive stats, probability, hypothesis testing</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>

                     <a href="courses.html?video=excel-analysis" class="topic-card">
                          <h4>Excel for Data Analysis</h4>
                          <p>Pivot tables, formulas, dashboards</p>
                          <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                      </a>

                     <a href="courses.html?video=sql-analytics" class="topic-card">
                         <h4>SQL for Analytics</h4>
                         <p>Joins, subqueries, aggregation, window functions</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>

                     <a href="courses.html?video=powerbi-full" class="topic-card">
                          <h4>Power BI Full Course</h4>
                          <p>Data visualization, DAX, storytelling with data</p>
                          <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                      </a>

                      <a href="courses.html?video=tableau-full" class="topic-card">
                           <h4>Tableau Full Course</h4>
                           <p>Data visualization, dashboards</p>
                           <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                       </a>
                </div>
            </section>

            <section class="course-module">
                <h2>ðŸŸ¨ MODULE 2: Business Analyst Track</h2>
                 <p class="module-goal">Goal: Learn tools to interpret and present business insights, focusing on decision-making, reporting, and stakeholder communication.</p>
                 <div class="topic-list-grid">

                     <a href="courses.html?video=python-analytics" class="topic-card">
                          <h4>Python for Analysis</h4>
                          <p>NumPy, Pandas, data cleaning, EDA</p>
                          <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                      </a>

                     <a href="courses.html?video=r-programming" class="topic-card">
                         <h4>R Programming for Analytics</h4>
                         <p>Data wrangling, ggplot2, R Markdown</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>

                     <a href="courses.html?video=spss-basics" class="topic-card">
                         <h4>SPSS Basics</h4>
                         <p>Survey data, regression, ANOVA</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>

                     <a href="courses.html?video=managerial-economics" class="topic-card">
                         <h4>Business Decision Making</h4>
                         <p>Business case studies, A/B testing, KPIs</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>
                 </div>
            </section>

            <section class="course-module">
                <h2>ðŸŸ¥ MODULE 3: Data Scientist Track</h2>
                <p class="module-goal">Goal: Learn modeling, prediction, and advanced data processing using ML and AI.</p>
                 <div class="topic-list-grid">

                     <a href="courses.html?video=ml-basics" class="topic-card">
                          <h4>Machine Learning Basics</h4>
                          <p>Supervised/unsupervised learning, regression, classification</p>
                          <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                      </a>

                     <a href="courses.html?video=deeplearning-nptel" class="topic-card">
                         <h4>Deep Learning & Neural Networks</h4>
                         <p>ANN, CNN, RNN basics</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>

                     <a href="courses.html?video=ai-concepts" class="topic-card">
                         <h4>Artificial Intelligence Concepts</h4>
                         <p>Search, logic, agents, decision trees</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>
                 </div>
            </section>

            <section class="course-module">
                <h2>ðŸŸ© MODULE 4: Big Data & Cloud Tools</h2>
                 <p class="module-goal">Goal: Learn to work with massive datasets using scalable tools and platforms.</p>
                 <div class="topic-list-grid">

                      <a href="courses.html?video=bigdata-computing" class="topic-card">
                          <h4>Big Data Tools (Hadoop & Spark)</h4>
                          <p>Distributed computing, HDFS, MapReduce</p>
                          <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                      </a>

                     <a href="courses.html?video=aws-analytics" class="topic-card">
                         <h4>Cloud Platforms (AWS, GCP, Azure)</h4>
                         <p>Data pipelines, cloud storage, serverless</p>
                         <span class="view-video-link"><i class="fas fa-video"></i> Watch Video</span>
                     </a>
                 </div>
            </section>
             <p class="coming-soon">ðŸš§ More categories and videos coming soon...</p>
        </div>


         <div id="videoPlayerContent" class="hidden"> <div class="back-link-container"> <a href="courses.html" class="back-link"><i class="fas fa-arrow-left"></i> Back to Catalog</a>
             </div>
              <h2 id="videoTitle">Loading Video...</h2> <div class="video-container">
                  <div id="youtubePlayer"></div> </div>
              <p id="resumeMessage" style="color: var(--text-secondary); font-size: 0.9rem; text-align: center; margin-top: 10px; display: none;"></p> <div class="notes-section">
                  <label for="videoNotes">Take Notes:</label>
                  <textarea id="videoNotes" placeholder="Write your notes here..."></textarea>
              </div>
         </div>

    </main>

     <script>
          // Basic authentication check - redirect if not logged in
          const userAuthenticated = localStorage.getItem('userAuthenticated');
          const adminAuthenticated = localStorage.getItem('adminAuthenticated');
          if (!userAuthenticated && !adminAuthenticated) {
               window.location.href = "auth.html#login"; // Redirect to login form
          }


          // --- YouTube Player API Script ---
          var tag = document.createElement('script');
          tag.src = "http://www.youtube.com/iframe_api"; // Correct official API URL
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


          // --- Global variables for YouTube Player ---
          var player;
          let saveProgressTimer = null; // Timer for saving video progress


          // --- Function called when the YouTube API is ready ---
          function onYouTubeIframeAPIReady() {
              document.addEventListener('DOMContentLoaded', function() {
                  const urlParams = new URLSearchParams(window.location.search);
                  const videoId = urlParams.get('video');

                  const courseIndexContent = document.getElementById('courseIndexContent');
                  const videoPlayerContent = document.getElementById('videoPlayerContent');
                  const pageTitle = document.getElementById('pageTitle');
                  const videoTitleElement = document.getElementById('videoTitle');
                  const notesTextarea = document.getElementById('videoNotes');
                  const resumeMessageElement = document.getElementById('resumeMessage');


                  if (videoId) {
                      // If a video ID is present, hide the index content and show the video player section
                      courseIndexContent.classList.add('hidden');
                      videoPlayerContent.classList.remove('hidden');
                       pageTitle.textContent = "Watching Course"; // Update page title

                       // --- Map our internal videoId to a YouTube Video ID and details ---
                       // IMPORTANT: Populate this map with your actual YouTube video IDs!
                       const videoMap = {
                           'stats-fundamentals': { youtubeId: 'r3d9GW1r0lQ', title: 'Statistics Fundamentals' }, // Example, Replace with actual YouTube IDs and titles
                           'excel-analysis': { youtubeId: 'EXAMPLE_EXCEL_ID', title: 'Excel for Data Analysis' }, // Replace
                           'sql-analytics': { youtubeId: 'EXAMPLE_SQL_ID', title: 'SQL for Analytics' }, // Replace
                           'powerbi-full': { youtubeId: 'EXAMPLE_POWERBI_ID', title: 'Power BI Full Course' }, // Replace
                           'tableau-full': { youtubeId: 'EXAMPLE_TABLEAU_ID', title: 'Tableau Full Course' }, // Replace
                           'python-analytics': { youtubeId: 'EXAMPLE_PYTHON_ID', title: 'Python for Analysis' }, // Replace
                           'r-programming': { youtubeId: 'EXAMPLE_R_ID', title: 'R Programming for Analytics' }, // Replace
                           'spss-basics': { youtubeId: 'EXAMPLE_SPSS_ID', title: 'SPSS Basics' }, // Replace
                           'managerial-economics': { youtubeId: 'EXAMPLE_MANAGERIAL_ID', title: 'Business Decision Making' }, // Replace
                           'ml-basics': { youtubeId: 'EXAMPLE_ML_ID', title: 'Machine Learning Basics' }, // Replace
                           'deeplearning-nptel': { youtubeId: 'EXAMPLE_DEEPLEARNING_ID', title: 'Deep Learning & Neural Networks' }, // Replace
                           'ai-concepts': { youtubeId: 'EXAMPLE_AI_ID', title: 'Artificial Intelligence Concepts' }, // Replace
                           'bigdata-computing': { youtubeId: 'EXAMPLE_BIGDATA_ID', title: 'Big Data Tools (Hadoop & Spark)' }, // Replace
                           'aws-analytics': { youtubeId: 'EXAMPLE_AWS_ID', title: 'Cloud Platforms (AWS Data Analytics)' }, // Replace
                           // Add all video IDs from your outline here with their actual YouTube IDs and titles
                       };

                       const videoDetails = videoMap[videoId];

                       if (videoDetails && videoDetails.youtubeId) {
                           videoTitleElement.textContent = videoDetails.title; // Set the video title

                           // Create the YouTube Player
                           player = new YT.Player('youtubePlayer', {
                               height: '390', // These will be controlled by CSS .video-container
                               width: '640',
                               videoId: videoDetails.youtubeId,
                               playerVars: {
                                   'autoplay': 1, // Optional: Autoplay the video
                                   'controls': 1,
                                   'enablejsapi': 1,
                                   'rel': 0, // Hide related videos
                                   'showinfo': 0, // Hide video title and uploader info
                                   'modestbranding': 1 // Show modest branding
                               },
                               events: {
                                   'onReady': onPlayerReady,
                                   'onStateChange': onPlayerStateChange
                               }
                           });

                           // Load saved notes for this videoId from localStorage
                           const savedNotes = localStorage.getItem('video-notes-' + videoId);
                           if (savedNotes) {
                               notesTextarea.value = savedNotes;
                           }

                           // --- Note Saving (Simple auto-save while typing) ---
                           let saveNotesTimer = null;
                           notesTextarea.addEventListener('input', function() {
                                clearTimeout(saveNotesTimer);
                                saveNotesTimer = setTimeout(() => {
                                    localStorage.setItem('video-notes-' + videoId, notesTextarea.value);
                                    console.log('Notes auto-saved for video:', videoId);
                                    // Optional: show a small "Notes saved!" message
                                }, 1000); // Save 1 second after user stops typing
                           });


                       } else {
                           // Handle case where videoId is not found in our map
                           videoPlayerContent.innerHTML = '<p class="no-feedback-message">Video not found or mapping is incomplete.</p>';
                           pageTitle.textContent = "Video Error";
                           console.error("Video ID not found in mapping:", videoId);
                       }


                   } else {
                       // If no video ID, show the course index
                       courseIndexContent.classList.remove('hidden');
                       videoPlayerContent.classList.add('hidden');
                       pageTitle.textContent = "Course Catalog";
                   }
              });
          }


          // --- YouTube Player API Event Handlers ---

          // The API calls this function when the video player is ready.
          function onPlayerReady(event) {
              const urlParams = new URLSearchParams(window.location.search);
              const videoId = urlParams.get('video');
              const savedTime = localStorage.getItem('ukno-video-progress-' + videoId); // Get saved time

              if (savedTime) {
                   const timeToSeek = parseFloat(savedTime);
                   // Ensure timeToSeek is a valid number before seeking
                  if (!isNaN(timeToSeek) && timeToSeek > 0) {
                      event.target.seekTo(timeToSeek); // Resume video
                      console.log('Resuming video to:', timeToSeek, 'seconds');
                       const resumeMessageElement = document.getElementById('resumeMessage');
                       if (resumeMessageElement) {
                           // Convert seconds to minutes and seconds for display
                           const minutes = Math.floor(timeToSeek / 60);
                           const seconds = Math.floor(timeToSeek % 60);
                           resumeMessageElement.textContent = `Resuming from ${minutes}m ${seconds}s`;
                           resumeMessageElement.style.display = 'block';
                           // Hide message after a few seconds
                           setTimeout(() => {
                               resumeMessageElement.style.display = 'none';
                           }, 5000);
                       }
                  }
              }

              // Optional: Start playing automatically if not resuming (autoplay playerVar handles this)
              // event.target.playVideo();
          }

          // The API calls this function when the player's state changes.
          function onPlayerStateChange(event) {
              const urlParams = new URLSearchParams(window.location.search);
              const videoId = urlParams.get('video');

              if (!videoId) return; // Only save progress if a video is loaded

              // Save video progress when playing
              if (event.data === YT.PlayerState.PLAYING) {
                  console.log('Video is playing. Starting save timer...');
                  // Clear any existing timer to avoid multiple timers running
                  clearInterval(saveProgressTimer);
                  saveProgressTimer = setInterval(() => {
                      const currentTime = player.getCurrentTime();
                      localStorage.setItem('ukno-video-progress-' + videoId, currentTime.toString());
                      // console.log('Saved progress:', currentTime, 'seconds'); // Avoid excessive logging
                  }, 5000); // Save every 5 seconds
              } else {
                  console.log('Video is not playing. Stopping save timer...');
                  clearInterval(saveProgressTimer); // Stop saving when paused, ended, buffered, etc.

                  // Optional: Save final progress when paused or ended
                   if (event.data === YT.PlayerState.PAUSED || event.data === YT.PlayerState.ENDED) {
                       const currentTime = player.getCurrentTime();
                       localStorage.setItem('ukno-video-progress-' + videoId, currentTime.toString());
                       console.log('Final progress saved:', currentTime, 'seconds');

                        // If video ended, maybe remove the saved progress so it starts from beginning next time
                        if (event.data === YT.PlayerState.ENDED) {
                             localStorage.removeItem('ukno-video-progress-' + videoId);
                             console.log('Video ended. Removed saved progress.');
                              const resumeMessageElement = document.getElementById('resumeMessage');
                             if (resumeMessageElement) {
                                 resumeMessageElement.style.display = 'none'; // Hide resume message
                             }
                        }
                   }
              }
          }

     </script>

</body>
</html>